[데이터베이스 관리 및 배포 전략]

1. 핵심 원칙: 환경 분리 (Isolation)
   - 로컬(Local)과 서버(Server)의 데이터베이스는 철저히 분리한다.
   - 로컬 DB: 개발자가 임의로 생성한 '가짜 데이터(Dummy Data)'를 사용하여 기능 테스트.
   - 서버 DB: 실제 사용자가 쌓는 '운영 데이터(Production Data)' 보존.
   - 절대 금기 사항: 로컬 개발 환경에서 서버 DB(Production)에 직접 연결하여 DELETE/UPDATE 테스트를 하지 않는다.

2. 스키마 관리 (Schema Migration)
   - 도구: Alembic + SQLAlchemy
   - 역할: 데이터(내용물)는 건드리지 않고, 테이블 구조(뼈대)만 동기화한다.
   - 프로세스:
     1) 로컬: 모델 코드 수정 -> alembic revision (변경사항 파일 생성) -> 로컬 DB 적용 테스트.
     2) Git Push: 변경된 모델 코드와 alembic 버전 파일을 GitHub에 업로드.
     3) 서버: Git Pull -> alembic upgrade head (서버 DB에 구조 변경사항만 안전하게 반영).

3. 배포 자동화 (Deployment)
   - 서버 업데이트 시 수동으로 하지 않고 스크립트(deploy.sh)를 사용한다.
   - 스크립트 실행 시 동작 순서:
     1) git pull (최신 코드 받기)
     2) pip install (의존성 설치)
     3) alembic upgrade head (DB 구조 최신화)
     4) npm run build (프론트엔드 빌드)
     5) systemctl restart (서비스 재시작)

4. 운영 데이터 디버깅 (Backup & Dump)
   - 실제 서버 데이터로 버그를 재현해야 할 경우:
   - "서버 DB에 직접 접속"하지 않고 "덤프(Dump) 파일"을 떠서 로컬로 가져온다.
   - Workflow: 서버에서 pg_dump -> 로컬로 파일 전송(scp) -> 로컬 DB에 pg_restore.


[데이터베이스 관리 및 배포 전략]

docker run -d --name aisogething-db -p 5432:5432 -e POSTGRES_USER=postgres -e POSTGRES_PASSWORD=0000 -e POSTGRES_DB=aisogething pgvector/pgvector:pg16

docker run 
-d --name aisogething-db 
-p 5432:5432 
-e POSTGRES_USER=postgres 
-e POSTGRES_PASSWORD=0000 
-e POSTGRES_DB=aisogething pgvector/pgvector:pg16

docker ps

python -m alembic revision --autogenerate -m "Initial_migration"
python -m alembic upgrade head
python -m alembic revision --autogenerate -m "auto_update"; python -m alembic upgrade head