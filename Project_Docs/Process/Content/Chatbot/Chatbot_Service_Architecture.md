================================================================================
[ AI 챗봇 서비스 아키텍처 (Chatbot Service Architecture) ]
================================================================================

1. 서비스 개요
   AiSogeThing의 모든 페이지에서 접근 가능한 상주형 AI 챗봇.
   유저의 시청 데이터를 분석하여 개인화된 인사이트와 추천을 제공.

2. 핵심 기능 (4가지)

   A. 성향 분석 (Taste Analysis)
      - 입력: 유저 ID
      - 로직: 
        1. user_youtube_logs에서 시청 기록 조회
        2. youtube_list의 tags, category_id 집계
        3. 상위 키워드 추출 (예: "게임", "음악", "코미디")
      - 출력: "당신은 주로 [게임/엔터] 콘텐츠를 선호하시네요! 특히 [침착맨, 연애] 같은 채널을 자주 보셨어요."

   B. 영상 추천 (Video Recommendation)
      - 입력: 유저 ID
      - 로직:
        1. 성향 분석 결과(키워드)를 기반으로
        2. youtube_list에서 tags LIKE '%키워드%' 검색
        3. 아직 안 본 영상 중 조회수/최신순 정렬
      - 출력: "이런 영상 어때요? [제목], [썸네일], [채널]"

   C. 유사 유저 찾기 (User Matching)
      - 입력: 유저 ID
      - 로직:
        1. 내가 구독한 채널 목록 추출
        2. 다른 유저들의 구독 목록과 교집합 비율 계산
        3. 유사도 상위 3명 반환
      - 출력: "[닉네임]님과 취향이 80% 일치해요!"

   D. 서비스 가이드 (Service Info - RAG 기반)
      - 입력: 질문 ("구독 기능이 뭐야?", "영상은 어떻게 수집되나요?")
      - 로직:
        1. Project_Docs 내용을 벡터화 (향후 ChromaDB)
        2. 질문과 유사한 문서 검색 (RAG)
        3. LLM으로 답변 생성
      - 출력: "구독 기능은 관심 있는 유튜브 채널을 저장하여..."

--------------------------------------------------------------------------------

3. 기술 스택

   Frontend (React)
   - ChatbotWidget.jsx: 우측 하단 토글 UI
   - 상태 관리: useState (메시지 히스토리 등)

   Backend (FastAPI)
   - /api/chatbot/analyze-taste
   - /api/chatbot/recommend-videos
   - /api/chatbot/find-similar-users
   - /api/chatbot/service-info

   AI (향후 확장)
   - LangChain + OpenAI API
   - 또는 로컬 LLM (Llama, Mistral)

--------------------------------------------------------------------------------

4. UI/UX 설계

   위치: 화면 우측 하단 고정 (position: fixed)
   상태:
   - 닫혔을 때: 작은 아이콘 버튼 (💬)
   - 열렸을 때: 대화창 (400x600px)

   구성:
   - 헤더: "AI 도우미" + 닫기 버튼
   - 기능 버튼 (4개): [성향 분석] [영상 추천] [유사 유저] [도움말]
   - 채팅 영역: 메시지 리스트
   - 입력창: 직접 질문 입력 가능

--------------------------------------------------------------------------------

5. 개발 우선순위 (MVP)

   Phase 1 (오늘): UI + 더미 응답
   - 프론트 컴포넌트 제작
   - 백엔드 API 스케치 (하드코딩 응답)

   Phase 2 (내일): 실제 데이터 연동
   - DB 쿼리 기반 성향 분석 및 추천 구현

   Phase 3 (주말): LLM 연동
   - RAG 파이프라인 구축
   - 자연어 대화 기능 추가
