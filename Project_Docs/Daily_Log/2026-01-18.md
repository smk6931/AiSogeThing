2026-01-18 개발 로그

=== 오전/오후: 인프라 구축 및 도메인 연결 (Server Deployment) ===

1. 도메인 구매 및 DNS 연결
   - 서비스 도메인 'sogething.com' 확보 및 DNS A 레코드 연결 완료.
   - 오라클 클라우드 공인 IP와 매핑 확인.

2. 웹 서버(Nginx) 및 리버스 프록시(Reverse Proxy) 구축
   - Ubuntu 서버 내 Nginx 설치 및 설정 파일(nginx_sogething.conf) 구성.
   - 루트 경로(/) 접속 시 내부 3000번 포트(React Front)로 연결.
   - API 경로(/api) 접속 시 내부 8080번 포트(FastAPI Back)로 연결 및 IP 은닉 처리.

3. HTTPS 보안 적용 (SSL 인증서)
   - Certbot 도구를 활용하여 Let's Encrypt 무료 인증서 발급.
   - HTTP(80) 요청을 HTTPS(443) 보안 연결로 강제 리다이렉트 설정.
   - 오라클 클라우드 방화벽(Security List) 80, 443 포트 개방 작업 수행.

4. 프론트엔드 배포 환경 최적화
   - 개발(Local)과 운영(Prod) 환경의 API 호출 로직 분리.
   - 로컬: .env 내 명시된 URL(http://localhost:8001)로 직접 호출.
   - 서버: 상대 경로(/api)로 호출하여 Nginx가 백엔드로 중계하도록 구성.
   - Vite 보안 설정(allowedHosts) 수정하여 외부 도메인 접속 허용.

=== 트러블 슈팅 (Troubleshooting) ===

1. Nginx 443 포트 연결 거부 이슈
   - 현상: HTTPS 접속 시 ERR_CONNECTION_REFUSED 발생.
   - 원인: Certbot이 인증서는 발급했으나 Nginx 설정 파일에 SSL 리스닝 구문을 누락함.
   - 해결: SSL 설정이 포함된 설정 파일을 다시 적용하고 Nginx 재시작하여 해결.

2. 프론트엔드 변경 사항 미반영 이슈 (Zombie Process)
   - 현상: .env 수정 후 재시작했으나 여전히 구버전 설정으로 동작함.
   - 원인: nohup으로 실행된 기존 Node 프로세스가 완전히 종료되지 않고 포트(3000)를 점유 중이었음.
   - 해결: lsof 명령어로 3000번 포트 점유 프로세스(PID) 식별 후 강제 종료(kill -9) 및 재구동.

=== 문서화 (Documentation) ===
   - README.md: 라이브 서비스 링크 및 '개발 진행 중(WIP)' 배너 추가.
   - Domain_Guide.txt: 도메인 구매부터 HTTPS 적용까지의 전체 프로세스 및 Q&A 정리.
   - API_Flow_Diagram.md: 로컬 vs 서버 환경의 API 데이터 흐름 차이 시각화 정리.

=== 오후/저녁: DB 구축 및 Alembic 마이그레이션 (DB & Backend Infrastructure) ===

1. 로컬 데이터베이스 환경 구축 (Docker)
   - PostgreSQL 기반의 'aisogething-db' 컨테이너 생성 및 실행.
   - AI 기능을 고려하여 'pgvector' 확장이 포함된 이미지 사용.
   - 포트(5432) 및 기본 계정(postgres/0000) 설정 완료.

2. 백엔드 구조 리팩토링 (Modular Architecture)
   - 기존의 단일 파일 구조에서 기능별(User, Youtube) 모듈 구조로 변경.
   - 순환 참조(Circular Import) 방지를 위해 Core 폴더 도입.
   - 'back/core/database.py': DB 연결 설정과 모든 모델(Registry)을 한곳에서 관리하도록 통합.

3. Alembic 마이그레이션 도구 도입
   - DB 스키마(테이블 구조)를 코드로 관리하기 위해 Alembic 설치 및 초기화.
   - 모델 변경 사항을 자동 감지하여 마이그레이션 파일(Revision) 생성 기능 구현.
   - 'alembic upgrade head' 명령어로 DB 테이블 자동 생성 프로세스 구축.

4. 1-Click 자동 배포 시스템 구축
   - 'deploy.sh' 스크립트 작성하여 배포 자동화.
   - 기능: Git Pull -> Pip 설치 -> DB 마이그레이션 -> 기존 서버 종료 -> 재시작.
   - 로컬에서 Push하고 서버에서 스크립트 실행만 하면 모든 업데이트가 반영되도록 구성.

5. 서버(Oracle Cloud) DB 환경 동기화
   - 서버에도 Docker 설치 및 동일한 스펙의 DB 컨테이너 구동.
   - SSH 터널링을 통해 로컬 개발 도구(DBeaver 등)에서 서버 DB를 안전하게 조회하도록 구성.
   - 로컬 코드와 서버 코드를 Git으로 완전 동기화(Reset Hard)하여 환경 일치.
